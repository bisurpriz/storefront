query getSingleTenantOrderItem($id: bigint) {
  order_tenant(where: { id: { _eq: $id } }) {
    id
    tenant {
      id
    }
  }
}

mutation createOrder($object: order_insert_input!) {
  insert_order_one(object: $object) {
    id
  }
}

query getOrderApproveImages($shortCode: String) {
  order_item(where: { short_code: { _eq: $shortCode } }) {
    images_to_approve
    is_images_approved
    image_approve_expiry
  }
}

mutation updateOrderItemApprove(
  $token: String!
  $status: Boolean
  $note: String
) {
  update_order_item(
    where: { image_approve_token: { _eq: $token } }
    _set: { is_images_approved: $status, approve_note: $note }
  ) {
    affected_rows
    returning {
      is_images_approved
    }
  }
}

query getOrderForTracking($orderNo: bigint!) {
  order(where: { order_no: { _eq: $orderNo }, payment_status: { _eq: PAID } }) {
    created_at
    order_no
    tenant_orders {
      id
      status
      order_items {
        quantity
        id
        delivery_date
        delivery_time
        product {
          name
          id
          slug
          product_categories {
            category {
              name
              id
              slug
            }
          }
        }
      }
    }
  }
}

query GetOrderById($id: uuid = "") {
  order_by_pk(id: $id) {
    created_at
    tenant_orders {
      tenant {
        tenants {
          logo
          name
        }
      }
      order_items {
        id
        order_item_special_images {
          id
          image_url
          order_item_id
          quantity_index
        }
        order_item_special_texts {
          id
          order_item_id
          quantity_index
          content
        }
        status
        sell_price
        quantity
        product {
          image_url
          slug
          name
          product_customizable_areas {
            customizable_area {
              id
              type
            }
            id
            max_character
            count
          }
        }
      }
    }
  }
}
