mutation sendMessageAlone($message: String!, $receiver_id: uuid!, $order_tenant_id: bigint!, $user_id: uuid!) {
  insert_message_one(object: {receiver_id: $receiver_id, message: $message, chat_thread: {data: {order_tenant_id: $order_tenant_id, tenat_id: $receiver_id, user_id: $user_id}, on_conflict: {constraint: chat_thread_order_tenant_id_key, update_columns: []}}}) {
    created_at
    chat_thread {
      tenat_id
      order_tenant_id
    }
  }
}


mutation sendMessage($message: String!, $receiver_id: uuid!, $chat_thread_id: uuid!) {
  insert_message_one(object: { receiver_id: $receiver_id, message: $message, chat_thread_id: $chat_thread_id }) {
    created_at
  }
}

mutation markAsRead($chat_thread_id: uuid!) {
  update_message_many(updates: { _set: { is_read: true }, where: { chat_thread_id: { _eq: $chat_thread_id }, is_read: { _eq: false } } }) {
    affected_rows
  }
}
